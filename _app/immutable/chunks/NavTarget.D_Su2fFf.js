import{s as E,n as N,c as T,o as S,x as m,a as R,u as z,g as M,b as U,y as V,e as F}from"./scheduler.CFpRn4Gx.js";import{S as Y,i as A,s as q,e as g,f as B,c as _,a as p,d as h,n as r,g as w,p as D,A as G,t as J,b as K,h as v,j as O,q as Q,r as W}from"./index.Bjm21fvV.js";import{p as X,w as H}from"./entry.Cjx6ALFd.js";const Z=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function j(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function y(o,s,i){const a=o.slice();return a[3]=s[i],a[5]=i,a}function I(o){let s,i,a=o[3].itemtext+"",c,u,n,t;return{c(){s=g("li"),i=g("a"),c=J(a),t=q(),this.h()},l(l){s=_(l,"LI",{class:!0});var e=p(s);i=_(e,"A",{class:!0,href:!0});var d=p(i);c=K(d,a),d.forEach(h),t=B(e),e.forEach(h),this.h()},h(){r(i,"class",u=m(o[5]===o[1]?"current":"")+" svelte-e2748j"),r(i,"href",n=`#${o[3].id}`),r(s,"class","svelte-e2748j")},m(l,e){w(l,s,e),v(s,i),v(i,c),v(s,t)},p(l,e){e&1&&a!==(a=l[3].itemtext+"")&&O(c,a),e&2&&u!==(u=m(l[5]===l[1]?"current":"")+" svelte-e2748j")&&r(i,"class",u),e&1&&n!==(n=`#${l[3].id}`)&&r(i,"href",n)},d(l){l&&h(s)}}}function k(o){let s,i,a,c,u=j(o[0]),n=[];for(let t=0;t<u.length;t+=1)n[t]=I(y(o,u,t));return{c(){s=q(),i=g("ul");for(let t=0;t<n.length;t+=1)n[t].c();this.h()},l(t){s=B(t),i=_(t,"UL",{class:!0});var l=p(i);for(let e=0;e<n.length;e+=1)n[e].l(l);l.forEach(h),this.h()},h(){r(i,"class","svelte-e2748j")},m(t,l){w(t,s,l),w(t,i,l);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(i,null);a||(c=D(document,"scroll",o[2]),a=!0)},p(t,[l]){if(l&3){u=j(t[0]);let e;for(e=0;e<u.length;e+=1){const d=y(t,u,e);n[e]?n[e].p(d,l):(n[e]=I(d),n[e].c(),n[e].m(i,null))}for(;e<n.length;e+=1)n[e].d(1);n.length=u.length}},i:N,o:N,d(t){t&&(h(s),h(i)),G(n,t),a=!1,c()}}}let b=H([]),P=H(0);const C=o=>b.update(s=>{console.log("adding",o,"to",s);let i=s.find(a=>a.id===o.id);return i?(i.itemtext=o.itemtext,i.topPosition=o.topPosition,s):[...s,o]}),x=o=>b.update(s=>s.filter(i=>i.id!==o));function $(o,s,i){let a,c;T(o,b,n=>i(0,a=n)),T(o,P,n=>i(1,c=n));const u=()=>{let n=a.toSorted((e,d)=>e.topPosition-d.topPosition),t=0,l=0;console.log("onscroll",{arr:n,highestTopPosition:t,highestTopPositionIndex:l},window.scrollY,window.innerHeight);for(let e=0;e<n.length;e++)n[e].topPosition>t&&n[e].topPosition<window.scrollY+window.innerHeight/2&&(l=e,t=n[e].topPosition);P.set(l)};return S(u),b.subscribe(u),P.subscribe(n=>{var t;(t=a[n])!=null&&t.id&&X(`#${a[n].id}`,{})}),[a,c,u]}class oe extends Y{constructor(s){super(),A(this,s,$,k,E,{})}}const{window:ee}=Z;function te(o){let s,i,a,c,u;const n=o[7].default,t=R(n,o,o[6],null);return{c(){s=g("div"),t&&t.c(),this.h()},l(l){s=_(l,"DIV",{class:!0,id:!0,style:!0});var e=p(s);t&&t.l(e),e.forEach(h),this.h()},h(){r(s,"class",i=m(`nav-target ${o[2]}`)+" svelte-5u3cl1"),r(s,"id",o[0]),r(s,"style",o[1])},m(l,e){w(l,s,e),t&&t.m(s,null),o[8](s),a=!0,c||(u=D(ee,"resize",o[4]),c=!0)},p(l,[e]){t&&t.p&&(!a||e&64)&&z(t,n,l,l[6],a?U(n,l[6],e,null):M(l[6]),null),(!a||e&4&&i!==(i=m(`nav-target ${l[2]}`)+" svelte-5u3cl1"))&&r(s,"class",i),(!a||e&1)&&r(s,"id",l[0]),(!a||e&2)&&r(s,"style",l[1])},i(l){a||(Q(t,l),a=!0)},o(l){W(t,l),a=!1},d(l){l&&h(s),t&&t.d(l),o[8](null),c=!1,u()}}}function se(o,s,i){let{$$slots:a={},$$scope:c}=s,{id:u}=s,{itemtext:n}=s,{style:t}=s,{className:l=""}=s,e;C({id:u,itemtext:n});let d=()=>{if(!window)return;let f=e.getBoundingClientRect().top+window.scrollY;console.log(f,e.getBoundingClientRect().top,window.scrollY),C({id:u,itemtext:n,topPosition:f})};S(d),V(()=>{x(u)});function L(f){F[f?"unshift":"push"](()=>{e=f,i(3,e)})}return o.$$set=f=>{"id"in f&&i(0,u=f.id),"itemtext"in f&&i(5,n=f.itemtext),"style"in f&&i(1,t=f.style),"className"in f&&i(2,l=f.className),"$$scope"in f&&i(6,c=f.$$scope)},[u,t,l,e,d,n,c,a,L]}class ae extends Y{constructor(s){super(),A(this,s,se,te,E,{id:0,itemtext:5,style:1,className:2})}}export{oe as N,ae as a};
