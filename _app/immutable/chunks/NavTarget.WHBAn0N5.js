import{s as E,n as j,c as N,o as S,x as m,a as R,u as z,g as M,b as U,y as V,e as F}from"./scheduler.CFpRn4Gx.js";import{S as Y,i as A,s as q,e as g,f as B,c as _,a as p,d as h,n as d,g as w,p as D,A as G,t as J,b as K,h as b,j as O,q as Q,r as W}from"./index.Bjm21fvV.js";import{p as X,w as H}from"./entry.Cd-2CZ3V.js";const Z=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function y(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function T(n,t,l){const a=n.slice();return a[3]=t[l],a[5]=l,a}function I(n){let t,l,a=n[3].itemtext+"",c,u,s,o;return{c(){t=g("li"),l=g("a"),c=J(a),o=q(),this.h()},l(i){t=_(i,"LI",{class:!0});var e=p(t);l=_(e,"A",{class:!0,href:!0});var f=p(l);c=K(f,a),f.forEach(h),o=B(e),e.forEach(h),this.h()},h(){d(l,"class",u=m(n[5]===n[1]?"current":"")+" svelte-e2748j"),d(l,"href",s=`#${n[3].id}`),d(t,"class","svelte-e2748j")},m(i,e){w(i,t,e),b(t,l),b(l,c),b(t,o)},p(i,e){e&1&&a!==(a=i[3].itemtext+"")&&O(c,a),e&2&&u!==(u=m(i[5]===i[1]?"current":"")+" svelte-e2748j")&&d(l,"class",u),e&1&&s!==(s=`#${i[3].id}`)&&d(l,"href",s)},d(i){i&&h(t)}}}function k(n){let t,l,a,c,u=y(n[0]),s=[];for(let o=0;o<u.length;o+=1)s[o]=I(T(n,u,o));return{c(){t=q(),l=g("ul");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=B(o),l=_(o,"UL",{class:!0});var i=p(l);for(let e=0;e<s.length;e+=1)s[e].l(i);i.forEach(h),this.h()},h(){d(l,"class","svelte-e2748j")},m(o,i){w(o,t,i),w(o,l,i);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(l,null);a||(c=D(document,"scroll",n[2]),a=!0)},p(o,[i]){if(i&3){u=y(o[0]);let e;for(e=0;e<u.length;e+=1){const f=T(o,u,e);s[e]?s[e].p(f,i):(s[e]=I(f),s[e].c(),s[e].m(l,null))}for(;e<s.length;e+=1)s[e].d(1);s.length=u.length}},i:j,o:j,d(o){o&&(h(t),h(l)),G(s,o),a=!1,c()}}}let v=H([]),P=H(0);const C=n=>v.update(t=>{console.log("adding",n,"to",t);let l=t.find(a=>a.id===n.id);return l?(l.itemtext=n.itemtext,l.topPosition=n.topPosition,t):[...t,n]}),x=n=>v.update(t=>t.filter(l=>l.id!==n));function $(n,t,l){let a,c;N(n,v,s=>l(0,a=s)),N(n,P,s=>l(1,c=s));const u=()=>{let s=a.toSorted((e,f)=>e.topPosition-f.topPosition),o=0,i=0;console.log("onscroll",{arr:s,highestTopPosition:o,highestTopPositionIndex:i},window.scrollY,window.innerHeight);for(let e=0;e<s.length;e++)s[e].topPosition>o&&s[e].topPosition<window.scrollY+window.innerHeight/2&&(i=e,o=s[e].topPosition);P.set(i)};return S(u),v.subscribe(u),P.subscribe(s=>{var o;(o=a[s])!=null&&o.id&&X(`#${a[s].id}`,{})}),[a,c,u]}class oe extends Y{constructor(t){super(),A(this,t,$,k,E,{})}}const{window:ee}=Z;function te(n){let t,l,a,c,u,s;const o=n[7].default,i=R(o,n,n[6],null);return{c(){t=g("div"),i&&i.c(),this.h()},l(e){t=_(e,"DIV",{class:!0,id:!0,style:!0});var f=p(t);i&&i.l(f),f.forEach(h),this.h()},h(){d(t,"class",l=m(`nav-target ${n[2]}`)+" svelte-js4e06"),d(t,"id",n[0]),d(t,"style",a=`--margin-top: 3em; ${n[1]}`)},m(e,f){w(e,t,f),i&&i.m(t,null),n[8](t),c=!0,u||(s=D(ee,"resize",n[4]),u=!0)},p(e,[f]){i&&i.p&&(!c||f&64)&&z(i,o,e,e[6],c?U(o,e[6],f,null):M(e[6]),null),(!c||f&4&&l!==(l=m(`nav-target ${e[2]}`)+" svelte-js4e06"))&&d(t,"class",l),(!c||f&1)&&d(t,"id",e[0]),(!c||f&2&&a!==(a=`--margin-top: 3em; ${e[1]}`))&&d(t,"style",a)},i(e){c||(Q(i,e),c=!0)},o(e){W(i,e),c=!1},d(e){e&&h(t),i&&i.d(e),n[8](null),u=!1,s()}}}function se(n,t,l){let{$$slots:a={},$$scope:c}=t,{id:u}=t,{itemtext:s}=t,{style:o}=t,{className:i=""}=t,e;C({id:u,itemtext:s});let f=()=>{if(!window)return;let r=e.getBoundingClientRect().top+window.scrollY;console.log(r,e.getBoundingClientRect().top,window.scrollY),C({id:u,itemtext:s,topPosition:r})};S(f),V(()=>{x(u)});function L(r){F[r?"unshift":"push"](()=>{e=r,l(3,e)})}return n.$$set=r=>{"id"in r&&l(0,u=r.id),"itemtext"in r&&l(5,s=r.itemtext),"style"in r&&l(1,o=r.style),"className"in r&&l(2,i=r.className),"$$scope"in r&&l(6,c=r.$$scope)},[u,o,i,e,f,s,c,a,L]}class ae extends Y{constructor(t){super(),A(this,t,se,te,E,{id:0,itemtext:5,style:1,className:2})}}export{oe as N,ae as a};
