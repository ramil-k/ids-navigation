import{s as S,n as y,c as N,o as Y,x as m,a as H,u as M,g as U,b as V,y as F,e as G}from"./scheduler.CFpRn4Gx.js";import{S as A,i as q,s as B,e as g,f as D,c as _,a as b,d as h,n as f,g as p,p as L,A as J,t as K,b as O,h as v,j as Q,q as W,r as X}from"./index.2bV3aRwt.js";import{p as Z,w as R}from"./entry.BFvtvTP8.js";const j=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function T(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}const{document:k}=j;function I(o,l,n){const a=o.slice();return a[3]=l[n],a[5]=n,a}function C(o){let l,n,a=o[3].itemtext+"",c,u,i,t;return{c(){l=g("li"),n=g("a"),c=K(a),t=B(),this.h()},l(s){l=_(s,"LI",{class:!0});var e=b(l);n=_(e,"A",{class:!0,href:!0});var d=b(n);c=O(d,a),d.forEach(h),t=D(e),e.forEach(h),this.h()},h(){f(n,"class",u=m(o[5]===o[1]?"current":"")+" svelte-1dgrb0s"),f(n,"href",i=`#${o[3].id}`),f(l,"class","svelte-1dgrb0s")},m(s,e){p(s,l,e),v(l,n),v(n,c),v(l,t)},p(s,e){e&1&&a!==(a=s[3].itemtext+"")&&Q(c,a),e&2&&u!==(u=m(s[5]===s[1]?"current":"")+" svelte-1dgrb0s")&&f(n,"class",u),e&1&&i!==(i=`#${s[3].id}`)&&f(n,"href",i)},d(s){s&&h(l)}}}function x(o){let l,n,a,c,u=T(o[0]),i=[];for(let t=0;t<u.length;t+=1)i[t]=C(I(o,u,t));return{c(){l=B(),n=g("ul");for(let t=0;t<i.length;t+=1)i[t].c();this.h()},l(t){l=D(t),n=_(t,"UL",{class:!0});var s=b(n);for(let e=0;e<i.length;e+=1)i[e].l(s);s.forEach(h),this.h()},h(){f(n,"class","svelte-1dgrb0s")},m(t,s){p(t,l,s),p(t,n,s);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(n,null);a||(c=L(k,"scroll",o[2]),a=!0)},p(t,[s]){if(s&3){u=T(t[0]);let e;for(e=0;e<u.length;e+=1){const d=I(t,u,e);i[e]?i[e].p(d,s):(i[e]=C(d),i[e].c(),i[e].m(n,null))}for(;e<i.length;e+=1)i[e].d(1);i.length=u.length}},i:y,o:y,d(t){t&&(h(l),h(n)),J(i,t),a=!1,c()}}}let w=R([]),P=R(0);const E=o=>w.update(l=>{let n=l.find(a=>a.id===o.id);return n?(n.itemtext=o.itemtext,n.topPosition=o.topPosition,l):[...l,o]}),$=o=>w.update(l=>l.filter(n=>n.id!==o));function ee(o,l,n){let a,c;N(o,w,i=>n(0,a=i)),N(o,P,i=>n(1,c=i));const u=()=>{let i=a.toSorted((e,d)=>e.topPosition-d.topPosition),t=0,s=0;for(let e=0;e<i.length;e++)i[e].topPosition>t&&i[e].topPosition<window.scrollY+window.innerHeight/2&&t<window.scrollY&&(s=e,t=i[e].topPosition);P.set(s)};return Y(()=>{let i=P.subscribe(t=>{var s;if(document!=null&&document.body&&((s=a[t])!=null&&s.id))try{Z(`#${a[t].id}`,{})}catch(e){console.error(e)}});return u(),i}),w.subscribe(u),[a,c,u]}class ae extends A{constructor(l){super(),q(this,l,ee,x,S,{})}}const{window:te}=j;function se(o){let l,n,a,c,u;const i=o[7].default,t=H(i,o,o[6],null);return{c(){l=g("div"),t&&t.c(),this.h()},l(s){l=_(s,"DIV",{class:!0,id:!0,style:!0});var e=b(l);t&&t.l(e),e.forEach(h),this.h()},h(){f(l,"class",n=m(`nav-target ${o[2]}`)+" svelte-4te058"),f(l,"id",o[0]),f(l,"style",o[1])},m(s,e){p(s,l,e),t&&t.m(l,null),o[8](l),a=!0,c||(u=L(te,"resize",o[4]),c=!0)},p(s,[e]){t&&t.p&&(!a||e&64)&&M(t,i,s,s[6],a?V(i,s[6],e,null):U(s[6]),null),(!a||e&4&&n!==(n=m(`nav-target ${s[2]}`)+" svelte-4te058"))&&f(l,"class",n),(!a||e&1)&&f(l,"id",s[0]),(!a||e&2)&&f(l,"style",s[1])},i(s){a||(W(t,s),a=!0)},o(s){X(t,s),a=!1},d(s){s&&h(l),t&&t.d(s),o[8](null),c=!1,u()}}}function le(o,l,n){let{$$slots:a={},$$scope:c}=l,{id:u}=l,{itemtext:i}=l,{style:t}=l,{className:s=""}=l,e;E({id:u,itemtext:i});let d=()=>{if(!window)return;let r=e.getBoundingClientRect().top+window.scrollY;console.log(r,e.getBoundingClientRect().top,window.scrollY),E({id:u,itemtext:i,topPosition:r})};Y(d),F(()=>{$(u)});function z(r){G[r?"unshift":"push"](()=>{e=r,n(3,e)})}return o.$$set=r=>{"id"in r&&n(0,u=r.id),"itemtext"in r&&n(5,i=r.itemtext),"style"in r&&n(1,t=r.style),"className"in r&&n(2,s=r.className),"$$scope"in r&&n(6,c=r.$$scope)},[u,t,s,e,d,i,c,a,z]}class ue extends A{constructor(l){super(),q(this,l,le,se,S,{id:0,itemtext:5,style:1,className:2})}}export{ae as N,ue as a};
